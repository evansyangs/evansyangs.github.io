(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{373:function(e,t,n){},460:function(e,t,n){"use strict";var o=n(373);n.n(o).a},465:function(e,t,n){"use strict";n.r(t);n(424),n(9),n(24),n(33),n(426),n(431),n(433),n(434),n(435),n(436),n(437),n(438),n(439),n(440),n(441),n(442),n(443),n(445),n(446),n(447),n(448),n(449),n(450),n(451),n(452),n(453),n(454),n(455);var o=n(456),r=n.n(o),c=n(457),i=n.n(c),d=n(83),p={functional:!0,render:function(e,t){var n=t.parent,o=t.children,r=t.listeners;if(n._isMounted)return r.contentReady&&r.contentReady(),o;n.$once("hook:mounted",(function(){n.$forceUpdate()}))}},a=n(15);var u={name:"EncryptedContent",components:{MyClientOnly:Object(a.a)(p,void 0,void 0,!1,null,null,null).exports},props:{keyName:{type:String,required:!0},owners:{type:String,required:!0},encrypted:{type:Boolean,required:!0}},data:function(){return{encryptedContent:"",keyFromInput:"",decryptedComponent:""}},computed:{contentTitle:function(){return"加密的内容"},unencryptedText:function(){return"内容如下所示，它应该在发布前被加密。"},encryptedText:function(){return"这部分内容已被加密，你需要输入正确的密钥才能查看。"},decryptedText:function(){return"内容被成功解密并显示在下方。"},decryptButtonText:function(){return"解密"},icon:function(){return this.encrypted?this.decryptedComponent?"mdi mdi-lock-open":"mdi mdi-lock":"mdi mdi-lock-alert"}},methods:{onContentReady:function(){var e=this;this.$nextTick((function(){e.encrypted?e.encryptedContent=e.$refs.content.innerText.replace(/\s/g,"").replace(/\*/g,"="):d.a.$emit("decrypt-already")}))},onConfirm:function(){try{var e=function(e){for(var t=window.atob(e),n=t.length,o=new Uint8Array(n),r=0;r<n;r++)o[r]=t.charCodeAt(r);return o}(this.encryptedContent),t=r.a.utils.hex.toBytes(i()(this.keyFromInput)),n=new r.a.ModeOfOperation.ctr(t),o=r.a.utils.utf8.fromBytes(n.decrypt(e)),c=JSON.parse(o).component;this.decryptedComponent=c,this.$nextTick((function(){d.a.$emit("decrypt-succeed")}))}catch(e){d.a.$emit("decrypt-failed")}}}},s=(n(460),Object(a.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("MyClientOnly",{on:{contentReady:e.onContentReady}},[n("div",{staticClass:"encrypted-header"},[e.icon?n("p",{staticClass:"encrypted-icon"},[n("i",{class:e.icon})]):e._e(),e._v(" "),n("p",{staticClass:"encrypted-title"},[e._v("\n        "+e._s(e.contentTitle)+"\n      ")]),e._v(" "),e.encrypted?e.decryptedComponent?n("div",[n("p",[e._v(e._s(e.decryptedText))])]):n("div",[n("p",[e._v(e._s(e.encryptedText))]),e._v(" "),n("p",[n("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.keyFromInput,expression:"keyFromInput",modifiers:{lazy:!0}}],attrs:{type:"password",autocomplete:"off"},domProps:{value:e.keyFromInput},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onConfirm(t)},change:function(t){e.keyFromInput=t.target.value}}}),e._v(" "),n("button",{on:{click:e.onConfirm}},[e._v("\n            "+e._s(e.decryptButtonText)+"\n          ")])])]):n("div",[n("p",[e._v(e._s(e.unencryptedText))])])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.encrypted,expression:"!encrypted"}],ref:"content"},[e._t("default")],2),e._v(" "),e.decryptedComponent?n(e.decryptedComponent,{tag:"component"}):e._e()],1)],1)}),[],!1,null,null,null));t.default=s.exports}}]);