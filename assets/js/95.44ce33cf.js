(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{555:function(s,a,e){"use strict";e.r(a);var t=e(15),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),e("p",[s._v("它来了！它来了！它带着WSL 2走来了！")])]),s._v(" "),e("p",[s._v("期待已久的WSL 2终于随着2004版本的登场正式发布了，本文将简要记录安装WSL 2和配置Docker进行开发的过程。")]),s._v(" "),e("h2",{attrs:{id:"前置条件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前置条件"}},[s._v("#")]),s._v(" 前置条件")]),s._v(" "),e("ol",[e("li",[s._v("确保Windows 10版本已更新至v2004 (20H1 / Build 19041)")]),s._v(" "),e("li",[s._v("启用虚拟机平台（开启子系统功能）")]),s._v(" "),e("li",[s._v("下载最新版Docker")])]),s._v(" "),e("h2",{attrs:{id:"启用并配置wsl-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启用并配置wsl-2"}},[s._v("#")]),s._v(" 启用并配置WSL 2")]),s._v(" "),e("h3",{attrs:{id:"windows版本要求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#windows版本要求"}},[s._v("#")]),s._v(" Windows版本要求")]),s._v(" "),e("p",[e("code",[s._v("WSL 2")]),s._v("仅在Windwos 10 19041或更高版本中可用，我们可以在"),e("code",[s._v("cmd")]),s._v("中键入"),e("code",[s._v("ver")]),s._v("来检查当前"),e("code",[s._v("Windwos")]),s._v("的版本。")]),s._v(" "),e("h3",{attrs:{id:"启用虚拟机平台可选组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启用虚拟机平台可选组件"}},[s._v("#")]),s._v(" 启用虚拟机平台可选组件")]),s._v(" "),e("p",[s._v("在 "),e("code",[s._v("PowerShell")]),s._v(" 中以管理员身份运行下面命令：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart\ndism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("运行完成之后，请重启电脑完成安装。")]),s._v(" "),e("h3",{attrs:{id:"更新-wsl-2-linux-内核"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更新-wsl-2-linux-内核"}},[s._v("#")]),s._v(" 更新 WSL 2 Linux 内核")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi",target:"_blank",rel:"noopener noreferrer"}},[s._v("下载适用于 x64 计算机的最新 WSL2 Linux 内核"),e("OutboundLink")],1),s._v("的更新包。")]),s._v(" "),e("h3",{attrs:{id:"设置wsl发行版"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#设置wsl发行版"}},[s._v("#")]),s._v(" 设置WSL发行版")]),s._v(" "),e("p",[s._v("如果想要将默认的WSL发行版设置成 WSL 2，在 "),e("code",[s._v("PowervShell")]),s._v(" 中使用下面命令：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("wsl --set-default-version "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("如果想要设置某一个发行版为WSL2，在 PowerShell 中使用下面命令，将 "),e("code",[s._v("<Distro>")]),s._v(" 换成你想要设置的发行版即可，例如 Ubuntu-18.04")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("wsl --set-version "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Distro"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("验证使用的WSL版本")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("wsl -l -v\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"下载安装-ubuntu"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载安装-ubuntu"}},[s._v("#")]),s._v(" 下载安装 Ubuntu")]),s._v(" "),e("p",[s._v("在 "),e("code",[s._v("Windows应用商店")]),s._v("里搜索 "),e("code",[s._v("Ubuntu")]),s._v("，然后下载，下载完成之后打开 "),e("code",[s._v("Ubuntu")]),s._v("，这时会先进行一些初始化安装的设置，然后就会让你设置新的 UNIX用户名和密码，设置完成之后，就进入了 linux 子系统。验证是否是 WSL 2 我们只需要在 powerShell 下输入 "),e("code",[s._v("wsl -l -v")]),s._v("，输出内容如下，这里 "),e("code",[s._v("VERSION")]),s._v("为2代表启用了WSL 2")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("NAME                   STATE           VERSION\n* Ubuntu-18.04           Running         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"ubuntu更换国内源"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu更换国内源"}},[s._v("#")]),s._v(" Ubuntu更换国内源")]),s._v(" "),e("p",[s._v("首先备份一下默认的源")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /etc/apt/sources.list /etc/apt/sourses.list.bak\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("更换默认源为阿里源，使用 "),e("code",[s._v("sudo vim /etc/apt/sources.list")]),s._v(" 命令编辑，删除原来的内容，添加下面的阿里源信息：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("deb http://mirrors.aliyun.com/ubuntu/ focal main restricted\ndeb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted\ndeb http://mirrors.aliyun.com/ubuntu/ focal universe\ndeb http://mirrors.aliyun.com/ubuntu/ focal-updates universe\ndeb http://mirrors.aliyun.com/ubuntu/ focal multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ focal-updates multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted\ndeb http://mirrors.aliyun.com/ubuntu/ focal-security universe\ndeb http://mirrors.aliyun.com/ubuntu/ focal-security multiverse\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),e("p",[s._v("请注意你的Ubuntu版本。")])]),s._v(" "),e("p",[s._v("更换源之后，使用下面的命令更新一下")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" upgrade\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"内存占用异常"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#内存占用异常"}},[s._v("#")]),s._v(" 内存占用异常")]),s._v(" "),e("p",[s._v("解决方法：在"),e("code",[s._v("C:\\Users\\用户名")]),s._v("下创建一个名为"),e("code",[s._v(".wslconfig")]),s._v("的配置文件")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("wsl2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("memory")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("3GB "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Limits VM memory in WSL 2 to 3 GB")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("swap")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("localhostForwarding")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h2",{attrs:{id:"安装并配置docker环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装并配置docker环境"}},[s._v("#")]),s._v(" 安装并配置Docker环境")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://www.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("从Docker官网下载最新桌面版"),e("OutboundLink")],1)]),s._v(" "),e("h3",{attrs:{id:"修改-docker-daemon-配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改-docker-daemon-配置"}},[s._v("#")]),s._v(" 修改 Docker daemon 配置")]),s._v(" "),e("p",[s._v("在系统右下角托盘图标内右键菜单选择 "),e("code",[s._v("Settings")]),s._v("，打开配置窗口后左侧导航菜单选择 "),e("code",[s._v("Docker Daemon")]),s._v("。编辑窗口内的"),e("code",[s._v("JSON")]),s._v("串，填写加速器地址，如下所示。编辑完成，点击 Apply 保存按钮，等待Docker重启并应用配置的镜像加速器。")]),s._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"registry-mirrors"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n   "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://mirror.ccs.tencentyun.com"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n   "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://registry.docker-cn.com"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n   "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://docker.mirrors.ustc.edu.cn"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n   "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://hub-mirror.c.163.com"')]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"insecure-registries"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n   "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"registry.docker-cn.com"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n   "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker.mirrors.ustc.edu.cn"')]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"debug"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"experimental"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("h3",{attrs:{id:"拉取镜像、运行容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#拉取镜像、运行容器"}},[s._v("#")]),s._v(" 拉取镜像、运行容器")]),s._v(" "),e("p",[s._v("镜像："),e("a",{attrs:{href:"https://fentechsolutions.github.io/CausalDiscoveryToolbox/html/index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Causal Discovery Toolbox"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("拉取：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("docker pull divkal/cdt-py3.6\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("运行：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("docker run -d -i -t divkal/cdt-py3.6 /bin/bash\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"设置通过vscode远程连接docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#设置通过vscode远程连接docker"}},[s._v("#")]),s._v(" 设置通过VSCode远程连接Docker")]),s._v(" "),e("ol",[e("li",[s._v("在VSCode的settings.json中添加"),e("code",[s._v('"docker.host": "tcp://localhost:23750"')])])]),s._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),e("p",[s._v("若需要通过VSCode连接本地Docker，将其注释掉即可。")])]),s._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[s._v("在"),e("code",[s._v("cmd")]),s._v("中通过SSH保持远程连接")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -NL localhost:23750:/var/run/docker.sock user@hostname\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),e("p",[s._v("将"),e("code",[s._v("user")]),s._v("和"),e("code",[s._v("hostname")]),s._v("替换成自己的服务器信息。")])]),s._v(" "),e("h3",{attrs:{id:"vscode无法连接remote-ssh"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vscode无法连接remote-ssh"}},[s._v("#")]),s._v(" VSCode无法连接Remote SSH")]),s._v(" "),e("p",[s._v("当VSCode无法连接SSH到Remote时，可以尝试：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("pgrep -f "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vscode"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("xargs")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"常见问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[s._v("#")]),s._v(" 常见问题")]),s._v(" "),e("h3",{attrs:{id:"_1-文件系统权限问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-文件系统权限问题"}},[s._v("#")]),s._v(" 1. 文件系统权限问题")]),s._v(" "),e("p",[s._v("这只是让文件在 WSL 中的权限看起来正常（目录 "),e("code",[s._v("755")]),s._v("，文件 "),e("code",[s._v("644")]),s._v("），实际并不会作用到 Win­dows 文件系统下的文件本身。")]),s._v(" "),e("p",[s._v("在 "),e("code",[s._v("/etc/wsl.conf")]),s._v(" 中添加以下配置：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('[automount]\nenabled = true\nroot = /mnt/\noptions = "metadata,umask=22,fmask=111"\nmountFsTab = true\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("由于 "),e("code",[s._v("enabled")]),s._v("、"),e("code",[s._v("root")]),s._v("、"),e("code",[s._v("mountFsTab")]),s._v(" 均为默认值，可以对其进行精简：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('[automount]\noptions = "metadata,umask=22,fmask=111"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("上面的方法对所有盘符都有效，如果你想在 WSL 中调用 Win­dows 下的应用程序（比如 "),e("code",[s._v("explorer.exe")]),s._v(" . 调用资源管理器打开当前路径）就需要对 C 盘进行单独设置，否则会提示没有权限。首先确认 "),e("code",[s._v("wsl.conf")]),s._v(" 中的 "),e("code",[s._v("mountFsTab")]),s._v(" 设置为 "),e("code",[s._v("true")]),s._v("，然后编辑 "),e("code",[s._v("/etc/fstab")]),s._v("，添加如下内容：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("C:\\ /mnt/c drvfs rw,noatime,uid=1000,gid=1000,metadata,umask=22,fmask=11 0 0\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("此时以为所有问题都解决了，但用 "),e("code",[s._v("mkdir")]),s._v(" 命令新建一个目录，会发现新建的目录权限依然是 "),e("code",[s._v("777")]),s._v("。")]),s._v(" "),e("p",[s._v("目前民间解决方案是在"),e("code",[s._v(".profile")]),s._v("、"),e("code",[s._v(".bashrc")]),s._v("、"),e("code",[s._v(".zshrc")]),s._v(" 或者其他 shell 配置文件中添加如下命令，重新设置 umask")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('# Fixing Bad Default Permissions\nif [ "$(umask)" = "000" ]; then\n  umask 022\nfi\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("未来"),e("a",{attrs:{href:"https://github.com/microsoft/WSL/issues/4188#issuecomment-506538484",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方解决方案"),e("OutboundLink")],1),s._v("是在 "),e("code",[s._v("/etc/wsl.conf")]),s._v(" 添加以下配置：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[filesystem]\numask = 022\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("blockquote",[e("p",[s._v("在未来某个版本的系统更新后生效，与上面的方案理论上不会冲突，所以添加无副作用。")])]),s._v(" "),e("h2",{attrs:{id:"参考文献"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考文献"}},[s._v("#")]),s._v(" 参考文献")]),s._v(" "),e("ol",[e("li",[e("p",[e("a",{attrs:{href:"https://segmentfault.com/a/1190000021409814",target:"_blank",rel:"noopener noreferrer"}},[s._v("将WSL2作为生产力工具"),e("OutboundLink")],1)])]),s._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://juejin.im/post/5e840425518825738e21636e",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker——配置国内源"),e("OutboundLink")],1)])]),s._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://florian-kriegel.de/blog/?p=234",target:"_blank",rel:"noopener noreferrer"}},[s._v("VSCode Remote Development (SSH + Docker)"),e("OutboundLink")],1)])]),s._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://blog.csdn.net/fengke549015/article/details/106397903",target:"_blank",rel:"noopener noreferrer"}},[s._v("WSL2出现Vmmem内存占用过大问题解决"),e("OutboundLink")],1)])]),s._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://blog.csdn.net/luyahan/article/details/95164430",target:"_blank",rel:"noopener noreferrer"}},[s._v("VSCODE 无法连接Remote SSH"),e("OutboundLink")],1)])]),s._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://p3terx.com/archives/problems-and-solutions-encountered-in-wsl-use-2.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("WSL文件系统权限问题"),e("OutboundLink")],1)])])])])}),[],!1,null,null,null);a.default=r.exports}}]);